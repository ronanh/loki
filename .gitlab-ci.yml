include:
  - component: $CI_SERVER_FQDN/components/go/test@0.3.0
  - component: $CI_SERVER_FQDN/components/go/build@0.3.0
    inputs:
      binary_directory: ""

stages:
  - test
  - build

default:
  interruptible: true

lint:
  image: golang:latest
  stage: test
  script:
    - curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/HEAD/install.sh | sh -s -- -b $(go env GOPATH)/bin v2.1.6
    - make ci-check
